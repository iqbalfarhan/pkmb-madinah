import{r as u,u as G,b as Q,j as e}from"./app-DcIBRsLW.js";import{B as g}from"./button-BHayiiQk.js";import{C as b,a as N,b as R,e as y,c as D}from"./card-Bkhz9P0c.js";import{C as K}from"./checkbox-BcjVth7x.js";import{S as X}from"./separator-By50BDfk.js";import{T as S,a as L,b as v,e as a,d as _,c as f}from"./table-BpFPd22J.js";import{T as q}from"./textarea-Bj3OGao8.js";import{t as J,e as Y,c as ee,m as re}from"./utils-C5ZhllyX.js";import ne from"./report-header-vE00NU3M.js";import ae from"./report-student-card-Be0Amxd-.js";import{D as te}from"./download-C3LLK2RP.js";import{c as se}from"./createLucideIcon-BU0hAwVN.js";import{C as ie}from"./check-B8PMkhu0.js";/* empty css            */import"./index-C6cGwo-U.js";import"./index-CU967_Ze.js";import"./index-4fwAXKrg.js";import"./index-Ch_-Gjtq.js";import"./index-BF3g6nXa.js";import"./index-ByyzoEsy.js";import"./index-DBjXRdXg.js";import"./index-CBUk3eC4.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],le=se("FileJson",ce);function de(w,i,c,l){var x=this,h=u.useRef(null),j=u.useRef(0),k=u.useRef(0),r=u.useRef(null),n=u.useRef([]),d=u.useRef(),t=u.useRef(),m=u.useRef(w),p=u.useRef(!0);m.current=w;var F=typeof window<"u",T=!i&&i!==0&&F;if(typeof w!="function")throw new TypeError("Expected a function");i=+i||0;var M=!!(c=c||{}).leading,B=!("trailing"in c)||!!c.trailing,C="maxWait"in c,O="debounceOnServer"in c&&!!c.debounceOnServer,z=C?Math.max(+c.maxWait||0,i):null;u.useEffect(function(){return p.current=!0,function(){p.current=!1}},[]);var $=u.useMemo(function(){var P=function(s){var o=n.current,I=d.current;return n.current=d.current=null,j.current=s,k.current=k.current||s,t.current=m.current.apply(I,o)},E=function(s,o){T&&cancelAnimationFrame(r.current),r.current=T?requestAnimationFrame(s):setTimeout(s,o)},U=function(s){if(!p.current)return!1;var o=s-h.current;return!h.current||o>=i||o<0||C&&s-j.current>=z},W=function(s){return r.current=null,B&&n.current?P(s):(n.current=d.current=null,t.current)},H=function s(){var o=Date.now();if(M&&k.current===j.current&&V(),U(o))return W(o);if(p.current){var I=i-(o-h.current),Z=C?Math.min(I,z-(o-j.current)):I;E(s,Z)}},V=function(){},A=function(){if(F||O){var s=Date.now(),o=U(s);if(n.current=[].slice.call(arguments),d.current=x,h.current=s,o){if(!r.current&&p.current)return j.current=h.current,E(H,i),M?P(h.current):t.current;if(C)return E(H,i),P(h.current)}return r.current||E(H,i),t.current}};return A.cancel=function(){r.current&&(T?cancelAnimationFrame(r.current):clearTimeout(r.current)),j.current=0,n.current=h.current=d.current=r.current=null},A.isPending=function(){return!!r.current},A.flush=function(){return r.current?W(Date.now()):t.current},A},[M,C,i,z,B,T,F,O,l]);return $}const Ke=({data:w})=>{const{student:i,report:c}=G().props,{data:l,setData:x,put:h}=Q({data:w}),j=de((r,n,d)=>{const t={...l};t.data.curricular_domain[r].points[n].description=d,x(t)},300),k=u.useCallback(()=>{h(route("report.update",c.id),{preserveScroll:!0,onSuccess:()=>{J.success("Rapor berhasil disimpan")},onError:r=>J.error(Y(r))})},[h,c.id]);return u.useEffect(()=>{const r=n=>{(n.ctrlKey||n.metaKey)&&n.key==="s"&&(n.preventDefault(),k())};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[k]),e.jsxs(e.Fragment,{children:[e.jsx(ne,{}),e.jsx(ae,{student_name:l.data.nama,student_age:l.data.usia,student_nisn:l.data.nisn,classroom_name:l.data.kelas}),e.jsx("div",{className:"fixed right-6 -bottom-2 z-50",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(g,{asChild:!0,variant:"secondary",children:e.jsxs("a",{href:route("report.download",c.id),children:[e.jsx(te,{}),"Download PDF"]})}),e.jsx(g,{asChild:!0,variant:"secondary",children:e.jsxs("a",{href:route("report.raw",c.id),children:[e.jsx(le,{}),"Raw data"]})}),e.jsxs(g,{onClick:k,children:[e.jsx(ie,{}),"Simpan"]})]})}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"CURRICULAR DOMAIN"}),l.data.curricular_domain.map((r,n)=>e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:r.name}),e.jsx(y,{children:r.goal})]}),e.jsx(X,{}),e.jsx(D,{children:e.jsxs(S,{children:[e.jsx(L,{children:e.jsxs(v,{children:[e.jsx(a,{className:"text-center",children:"Fokus Perkembangan"}),e.jsx(a,{className:"w-xl text-center",children:"Perkembangan anak"}),e.jsx(a,{className:"w-[50px] text-center",children:"A"}),e.jsx(a,{className:"w-[50px] text-center",children:"B"}),e.jsx(a,{className:"w-[50px] text-center",children:"C"})]})}),e.jsx(_,{children:r.points.map((d,t)=>e.jsxs(v,{children:[e.jsx(a,{children:e.jsx("div",{className:"text-wrap",children:d.name})}),e.jsx(a,{children:e.jsx(q,{placeholder:"Tulis deskripsi disini...",className:"min-h-20",defaultValue:d.description,onChange:m=>j(n,t,m.target.value)})}),["A","B","C"].map(m=>e.jsx(a,{children:e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>{const p={...l};p.data.curricular_domain[n].points[t].mark=m,x(p)},children:e.jsx(K,{checked:d.mark===m})})},m))]},t))})]})})]},n)),e.jsx("h2",{className:"text-center text-xl font-bold",children:"18 SIKAP"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:"4 dari 18 Sikap yang dibangun di Sekolah Al â€“ Madinah."}),e.jsxs(y,{children:[e.jsx("li",{children:"I (membutuhkan motivasi)"}),e.jsx("li",{children:"II (menunjukkan perbaikan)"}),e.jsx("li",{children:"III (memiliki kompetensi)"})]})]}),e.jsx(D,{children:e.jsxs(S,{children:[e.jsx(L,{children:e.jsxs(v,{children:[e.jsx(f,{children:"No."}),e.jsx(f,{className:"w-full",children:"Sikap yang dikembangkan"}),e.jsx(f,{className:"text-center",children:"I"}),e.jsx(f,{className:"text-center",children:"II"}),e.jsx(f,{className:"text-center",children:"III"})]})}),e.jsx(_,{children:Object.entries(l.data.sikap).map(([r,n],d)=>e.jsxs(v,{children:[e.jsxs(a,{children:[d+1,"."]}),e.jsx(a,{children:r}),e.jsx(a,{children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(K,{checked:n===1,onCheckedChange:t=>x(`data.sikap.${r}`,t?1:null)})})}),e.jsx(a,{children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(K,{checked:n===2,onCheckedChange:t=>x(`data.sikap.${r}`,t?2:null)})})}),e.jsx(a,{children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(K,{checked:n===3,onCheckedChange:t=>x(`data.sikap.${r}`,t?3:null)})})})]}))})]})})]}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"EKSTRAKULIKULER"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:"Ekstrakulikuler"}),e.jsx(y,{children:"Ekstarkulukuler dan kegiatan yang diikuti siswa"})]}),e.jsx(D,{children:e.jsxs(S,{children:[e.jsx(L,{children:e.jsxs(v,{children:[e.jsx(f,{children:"No."}),e.jsx(f,{children:"Jenis Ekstrakurikuler"}),e.jsx(f,{children:"Kegiatan yang pernah Diikuti"})]})}),e.jsx(_,{children:i.activities?.map((r,n)=>e.jsxs(v,{children:[e.jsxs(a,{children:[n+1,"."]}),e.jsx(a,{children:r.extracurricular.name}),e.jsx(a,{children:r.description})]}))})]})})]}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"KETIDAKHADIRAN"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:"Ketidakhadiran"}),e.jsx(y,{children:"Ketidakhadiran siswa tahun ajaran ini"})]}),e.jsx(D,{children:e.jsx(S,{children:e.jsx(_,{children:["sakit","izin","tanpa keterangan"].map((r,n)=>e.jsxs(v,{children:[e.jsx(a,{children:n+1}),e.jsx(a,{children:ee(r)}),e.jsx(a,{children:re(l.data.ketidakhadiran[r])})]}))})})})]}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"KOMENTAR"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:"Komentar guru"}),e.jsx(y,{children:l.data.walikelas})]}),e.jsx(D,{children:e.jsx(q,{placeholder:"Tulis komentar guru disini",value:l.data.komentar_guru,onChange:r=>x("data.komentar_guru",r.target.value)})})]})]})};export{Ke as default};
