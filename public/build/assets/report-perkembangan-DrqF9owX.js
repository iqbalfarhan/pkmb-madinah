import{r as o,u as G,b as Q,j as e}from"./app-NFKsQaO4.js";import{B as g}from"./button-CCGesB9r.js";import{C as b,a as N,b as R,e as y,c as T}from"./card-mydevCxy.js";import{C as S}from"./checkbox-BS0xaZIm.js";import{S as X}from"./separator-BfhYpUZR.js";import{T as F,a as O,b as v,e as a,d as M,c as f}from"./table-D6l9OBdc.js";import{T as I}from"./textarea-5nPx_fSR.js";import{t as J,e as Y,c as ee}from"./utils-DQOAQYYT.js";import re from"./report-header-DrOShA4s.js";import ne from"./report-student-card-RyV3vSef.js";import{D as ae}from"./download-DmXbXmWE.js";import{c as te}from"./createLucideIcon-CdoLjLtJ.js";import{C as se}from"./check-cHyAdcuz.js";/* empty css            */import"./index-CeaWBWXq.js";import"./index-C8RquJQL.js";import"./index-BK_boG6W.js";import"./index-BIARLtI2.js";import"./index-hwIqkLii.js";import"./index-B-i-BJvv.js";import"./index-B6-LtYBw.js";import"./index-DAGqk9FJ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],ie=te("FileJson",ce);function le(w,c,i,h){var x=this,u=o.useRef(null),j=o.useRef(0),k=o.useRef(0),r=o.useRef(null),n=o.useRef([]),l=o.useRef(),t=o.useRef(),m=o.useRef(w),p=o.useRef(!0);m.current=w;var z=typeof window<"u",D=!c&&c!==0&&z;if(typeof w!="function")throw new TypeError("Expected a function");c=+c||0;var P=!!(i=i||{}).leading,B=!("trailing"in i)||!!i.trailing,C="maxWait"in i,U="debounceOnServer"in i&&!!i.debounceOnServer,_=C?Math.max(+i.maxWait||0,c):null;o.useEffect(function(){return p.current=!0,function(){p.current=!1}},[]);var $=o.useMemo(function(){var H=function(s){var d=n.current,K=l.current;return n.current=l.current=null,j.current=s,k.current=k.current||s,t.current=m.current.apply(K,d)},E=function(s,d){D&&cancelAnimationFrame(r.current),r.current=D?requestAnimationFrame(s):setTimeout(s,d)},W=function(s){if(!p.current)return!1;var d=s-u.current;return!u.current||d>=c||d<0||C&&s-j.current>=_},q=function(s){return r.current=null,B&&n.current?H(s):(n.current=l.current=null,t.current)},L=function s(){var d=Date.now();if(P&&k.current===j.current&&V(),W(d))return q(d);if(p.current){var K=c-(d-u.current),Z=C?Math.min(K,_-(d-j.current)):K;E(s,Z)}},V=function(){},A=function(){if(z||U){var s=Date.now(),d=W(s);if(n.current=[].slice.call(arguments),l.current=x,u.current=s,d){if(!r.current&&p.current)return j.current=u.current,E(L,c),P?H(u.current):t.current;if(C)return E(L,c),H(u.current)}return r.current||E(L,c),t.current}};return A.cancel=function(){r.current&&(D?cancelAnimationFrame(r.current):clearTimeout(r.current)),j.current=0,n.current=u.current=l.current=r.current=null},A.isPending=function(){return!!r.current},A.flush=function(){return r.current?q(Date.now()):t.current},A},[P,C,c,_,B,D,z,U,h]);return $}const Ke=({data:w})=>{const{student:c,report:i}=G().props,{data:h,setData:x,put:u}=Q({data:w}),j=le((r,n,l)=>{const t={...h};t.data.curricular_domain[r].points[n].description=l,x(t)},300),k=o.useCallback(()=>{u(route("report.update",i.id),{preserveScroll:!0,onSuccess:()=>{J.success("Rapor berhasil disimpan")},onError:r=>J.error(Y(r))})},[u,i.id]);return o.useEffect(()=>{const r=n=>{(n.ctrlKey||n.metaKey)&&n.key==="s"&&(n.preventDefault(),k())};return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[k]),e.jsxs(e.Fragment,{children:[e.jsx(re,{}),e.jsx(ne,{meta:w}),e.jsx("div",{className:"fixed right-6 -bottom-2 z-50",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(g,{asChild:!0,variant:"secondary",children:e.jsxs("a",{href:route("report.download",i.id),children:[e.jsx(ae,{}),"Download PDF"]})}),e.jsx(g,{asChild:!0,variant:"secondary",children:e.jsxs("a",{href:route("report.raw",i.id),children:[e.jsx(ie,{}),"Raw data"]})}),e.jsxs(g,{onClick:k,children:[e.jsx(se,{}),"Simpan"]})]})}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"CURRICULAR DOMAIN"}),h.data.curricular_domain.map((r,n)=>e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:r.name}),e.jsx(y,{children:r.goal})]}),e.jsx(X,{}),e.jsx(T,{children:e.jsxs(F,{children:[e.jsx(O,{children:e.jsxs(v,{children:[e.jsx(a,{className:"text-center",children:"Fokus Perkembangan"}),e.jsx(a,{className:"w-xl text-center",children:"Perkembangan anak"}),e.jsx(a,{className:"w-[50px] text-center",children:"A"}),e.jsx(a,{className:"w-[50px] text-center",children:"B"}),e.jsx(a,{className:"w-[50px] text-center",children:"C"})]})}),e.jsx(M,{children:r.points.map((l,t)=>e.jsxs(v,{children:[e.jsx(a,{children:e.jsx("div",{className:"text-wrap",children:l.name})}),e.jsx(a,{children:e.jsx(I,{placeholder:"Tulis deskripsi disini...",className:"min-h-20",defaultValue:l.description,onChange:m=>j(n,t,m.target.value)})}),["A","B","C"].map(m=>e.jsx(a,{children:e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>{const p={...h};p.data.curricular_domain[n].points[t].mark=m,x(p)},children:e.jsx(S,{checked:l.mark===m})})},m))]},t))})]})})]},n)),e.jsx("h2",{className:"text-center text-xl font-bold",children:"18 SIKAP"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsxs(R,{children:[Object.entries(h.data.sikap).length??0," dari 18 Sikap yang dibangun di Sekolah Al – Madinah."]}),e.jsx(y,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"★ (membutuhkan motivasi)"}),e.jsx("span",{children:"★★ (menunjukkan perbaikan)"}),e.jsx("span",{children:"★★★ (memiliki kompetensi)"})]})})]}),e.jsx(T,{children:e.jsxs(F,{children:[e.jsx(O,{children:e.jsxs(v,{children:[e.jsx(f,{children:"No."}),e.jsx(f,{className:"w-full",children:"Sikap yang dikembangkan"}),e.jsx(f,{className:"text-center",children:"★"}),e.jsx(f,{className:"text-center",children:"★★"}),e.jsx(f,{className:"text-center",children:"★★★"})]})}),e.jsx(M,{children:Object.entries(h.data.sikap).map(([r,n],l)=>e.jsxs(v,{children:[e.jsxs(a,{children:[l+1,"."]}),e.jsx(a,{children:r}),e.jsx(a,{className:"text-center",children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(S,{checked:n===1,onCheckedChange:t=>x(`data.sikap.${r}`,t?1:null)})})}),e.jsx(a,{className:"text-center",children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(S,{checked:n===2,onCheckedChange:t=>x(`data.sikap.${r}`,t?2:null)})})}),e.jsx(a,{className:"text-center",children:e.jsx(g,{variant:"ghost",size:"icon",children:e.jsx(S,{checked:n===3,onCheckedChange:t=>x(`data.sikap.${r}`,t?3:null)})})})]}))})]})})]}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"EKSTRAKULIKULER"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:"Ekstrakulikuler"}),e.jsx(y,{children:"Ekstarkulukuler dan kegiatan yang diikuti siswa"})]}),e.jsx(T,{children:e.jsxs(F,{children:[e.jsx(O,{children:e.jsxs(v,{children:[e.jsx(f,{children:"No."}),e.jsx(f,{children:"Jenis Ekstrakurikuler"}),e.jsx(f,{children:"Kegiatan yang pernah Diikuti"})]})}),e.jsx(M,{children:c.activities?.map((r,n)=>e.jsxs(v,{children:[e.jsxs(a,{children:[n+1,"."]}),e.jsx(a,{children:r.extracurricular.name}),e.jsx(a,{children:r.description})]}))})]})})]}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"KETIDAKHADIRAN"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:"Ketidakhadiran"}),e.jsx(y,{children:"Ketidakhadiran siswa tahun ajaran ini"})]}),e.jsx(T,{children:e.jsx(F,{children:e.jsx(M,{children:["sakit","izin","tanpa keterangan"].map((r,n)=>e.jsxs(v,{children:[e.jsx(a,{children:n+1}),e.jsx(a,{children:ee(r)}),e.jsx(a,{children:h.data.ketidakhadiran[r]})]}))})})})]}),e.jsx("h2",{className:"text-center text-xl font-bold",children:"KOMENTAR"}),e.jsxs(b,{children:[e.jsxs(N,{children:[e.jsx(R,{children:"Komentar guru"}),e.jsx(y,{children:h.data.walikelas})]}),e.jsx(T,{children:e.jsx(I,{placeholder:"Tulis komentar guru disini",value:h.data.komentar_guru,onChange:r=>x("data.komentar_guru",r.target.value)})})]})]})};export{Ke as default};
