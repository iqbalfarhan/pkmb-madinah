import{u as P,b as z,r as B,j as e,a as D}from"./app-C2nDhioB.js";import{F as x}from"./form-control-tVXv5v7W.js";import{B as t}from"./button-BRigku3v.js";import{C as u,a as k,b as g,e as N,d as V,c as f}from"./card-jPHBpYkE.js";import{C as I}from"./checkbox-CROHfIhZ.js";import{L as K}from"./label-CkpZoQqw.js";import{S as b,a as v,b as C,c as S,d as h}from"./select-C6nhISZF.js";import{S as q}from"./separator-CkvWaGBx.js";import{T as A,a as O,b as l,c as i,d as U,e as r,f as G}from"./table-Cgv5LWZA.js";import{T as J}from"./textarea-bMshZ8dO.js";import{t as d,e as _,g as Q,j as p}from"./utils-DPXBJoKz.js";import W from"./report-header-CAC9rrJq.js";import X from"./report-student-card-weQJgwgk.js";import{C as Y}from"./check-DnK0HuRH.js";import{c as Z}from"./createLucideIcon-C2T1Ml8Q.js";/* empty css            */import"./index-BwHels01.js";import"./index-DfE-lNjM.js";import"./index-B0nigNCI.js";import"./index-dbnRAHAk.js";import"./index-D01hRe7x.js";import"./index-C801NGxQ.js";import"./index-C_jMhWWW.js";import"./index-CDy2gNFH.js";import"./index-Dn0MXcg3.js";import"./index-BdQq_4o_.js";import"./index-D1t8xkmK.js";import"./index-DBq07Psv.js";import"./index-CQuk1E2v.js";import"./index-CRHuulH1.js";import"./index-D4_-0Mgm.js";import"./index-CVhx1DEf.js";import"./index-DKWf_xNi.js";import"./chevron-down-CxTAffot.js";const $=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],ee=Z("RefreshCcw",$),Pe=({data:m})=>{const{report:n,grades:T=[]}=P().props,{data:s,setData:c,put:j}=z({data:m}),y=B.useCallback(()=>{j(route("report.update",n.id),{preserveScroll:!0,onSuccess:()=>{d.success("Rapor berhasil disimpan")},onError:a=>d.error(_(a))})},[j,n.id]),R=Q(s.data.nilai,"type"),F=()=>{D.put(route("report.refresh-nilai",n.id),{type:n.report_type},{preserveScroll:!0,onSuccess:()=>d.success("Nilai updated"),onError:a=>d.error(_(a))})},w=p(s.data.nilai,a=>Number(a.nilai_tugas)),E=p(s.data.nilai,a=>Number(a.evaluasi)),M=p(s.data.nilai,a=>Number(a.rata_rata));return e.jsxs(e.Fragment,{children:[e.jsx(W,{}),e.jsx(X,{meta:m}),e.jsxs(t,{onClick:y,className:"fixed right-6 bottom-6",children:[e.jsx(Y,{}),"Simpan"]}),e.jsxs(u,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(k,{children:[e.jsx(g,{children:"Hasil rekap nilai siswa."}),e.jsx(N,{children:"Nilai yang tampil saat ini adalah rekap nilai yang diisi oleh guru."})]}),e.jsx(V,{children:e.jsxs(t,{variant:"secondary",onClick:F,children:[e.jsx(ee,{}),"Refresh nilai"]})})]}),e.jsx(f,{children:e.jsxs(A,{children:[e.jsxs(O,{children:[e.jsxs(l,{children:[e.jsx(i,{rowSpan:2,className:"text-center",children:"No"}),e.jsx(i,{rowSpan:2,className:"text-center",children:"Mata pelajaran"}),e.jsx(i,{colSpan:3,className:"text-center",children:"Nilai"})]}),e.jsxs(l,{children:[e.jsx(i,{className:"w-32 text-center",children:"Tugas"}),e.jsx(i,{className:"w-32 text-center",children:"Evaluasi"}),e.jsx(i,{className:"w-32 text-center",children:"Rata rata"})]})]}),e.jsx(U,{children:Object.entries(R).map(([a,H])=>e.jsxs(e.Fragment,{children:[a!=="Pelajaran dasar"&&e.jsx(l,{children:e.jsx(r,{colSpan:5,children:a})}),H.map((o,L)=>e.jsxs(l,{children:[e.jsx(r,{children:e.jsx(t,{size:"icon",variant:"ghost",disabled:!0,children:L+1})}),e.jsx(r,{children:e.jsx("p",{className:"text-wrap",children:o.name})}),e.jsx(r,{className:"text-center",children:o.nilai_tugas.toFixed(2)}),e.jsx(r,{className:"text-center",children:o.evaluasi.toFixed(2)}),e.jsx(r,{className:"text-center",children:o.rata_rata.toFixed(2)})]}))]}))}),e.jsx(G,{children:e.jsxs(l,{children:[e.jsx(r,{colSpan:2,className:"text-center",children:"Rata-rata"}),e.jsx(r,{className:"text-center",children:e.jsx(t,{variant:"ghost",disabled:!0,size:"icon",children:w.toFixed(2)})}),e.jsx(r,{className:"text-center",children:e.jsx(t,{variant:"ghost",disabled:!0,size:"icon",children:E.toFixed(2)})}),e.jsx(r,{className:"text-center",children:e.jsx(t,{variant:"ghost",disabled:!0,size:"icon",children:M.toFixed(2)})})]})})]})})]}),e.jsxs(K,{className:"flex h-9 items-center gap-2",children:[e.jsx(I,{checked:s.data.rapor_kenaikan_kelas,onCheckedChange:a=>c("data.rapor_kenaikan_kelas",a)}),e.jsx("span",{children:"Rapor ini merupakan rapor kenaikan kelas?"})]}),s.data.rapor_kenaikan_kelas&&e.jsxs(u,{children:[e.jsxs(k,{children:[e.jsx(g,{children:"Keputusan kenaikan kelas"}),e.jsx(N,{children:"Pilih keputusan kenaikan kelas"})]}),e.jsx(q,{}),e.jsx(f,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("div",{children:e.jsx(x,{label:"Keputusan",children:e.jsx(J,{value:s.data.keputusan,onChange:a=>c("data.keputusan",a.target.value)})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{label:"Naik kelas?",children:e.jsxs(b,{value:s.data.naik_kelas?"true":"false",onValueChange:a=>c("data.naik_kelas",a==="true"),children:[e.jsx(v,{children:e.jsx(C,{placeholder:"Pilih kelas selanjutnya"})}),e.jsxs(S,{children:[e.jsx(h,{value:"true",children:"Naik kelas"}),e.jsx(h,{value:"false",children:"Tidak naik kelas"})]})]})}),s.data.naik_kelas!==null&&e.jsx(x,{label:s.data.naik_kelas?"Naik ke kelas":"Tetap di kelas",children:e.jsxs(b,{value:s.data.ke_kelas,onValueChange:a=>c("data.ke_kelas",a),children:[e.jsx(v,{children:e.jsx(C,{placeholder:"Pilih jenjang kelas"})}),e.jsx(S,{children:T.map(a=>e.jsx(h,{value:a.name,children:a.name}))})]})})]})]})})]})]})};export{Pe as default};
