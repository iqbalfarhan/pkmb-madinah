import{r as l,j as a,u as J,b as O}from"./app-BPxaoD1B.js";import{a as c}from"./enums-BPLdzZis.js";import{m as W,t as N,e as q}from"./utils-DOVs39RK.js";import{F as t}from"./form-control-BxhTeRoy.js";import{S as A}from"./submit-button-D0VV-d5f.js";import{B as H}from"./button-Cf23Wpzi.js";import{D as U,a as z,b as G,c as Q,d as X,e as Y,f as Z,g as _}from"./dialog-DBM6NZ9L.js";import{I as o}from"./input-Bj33ue8f.js";import{S as x,a as j,b as g,c as v,d as k}from"./select-f1Vxtjd5.js";import{T as $}from"./textarea-DzEnRCKx.js";import{C as aa,c as ea,d as sa}from"./card-JFE8Uqsd.js";import{S as ta}from"./separator-BO-FxGl9.js";import la from"./ppdb-form-wrapper-u_PMaefC.js";/* empty css            */import"./label-BGwDAVJL.js";import"./index-79V150Ru.js";import"./index-ye8dhI6l.js";import"./loader-circle-C2ea1uRf.js";import"./createLucideIcon-DSJ66mhW.js";import"./check-B-onclxt.js";import"./index-DBoDL35E.js";import"./index-ClC08I3I.js";import"./index-Be_LjbFP.js";import"./index-DCfHmF9g.js";import"./index-wSHPV6mU.js";import"./index-CsQfIekp.js";import"./index-DpAcpf0n.js";import"./index-BFMlk8tQ.js";import"./x-vAhp2Bkg.js";import"./index-BdQq_4o_.js";import"./index-BXOgE4UN.js";import"./index-De7Wv0G9.js";import"./index-atC5gUvk.js";import"./index-CASJih5g.js";import"./index-Dy3xDW5n.js";import"./index-hAKo_CTN.js";import"./chevron-down-CHy7VJh-.js";import"./heading-small-8TLk5Zge.js";const ra=({value:r,onValueChange:d})=>{const[i,n]=l.useState(!1),[p,b]=l.useState("Kalimantan Timur"),[s,f]=l.useState("Balikpapan"),[m,S]=l.useState(""),[C,h]=l.useState(""),[D,u]=l.useState(""),[K,R]=l.useState(""),[P,y]=l.useState(""),[w,B]=l.useState(""),V=[...new Set(c.map(e=>e.provinsi))],L=[...new Set(c.filter(e=>e.provinsi===p).map(e=>e.kabupaten))],M=[...new Set(c.filter(e=>e.kabupaten===s).map(e=>e.kecamatan))],E=[...new Set(c.filter(e=>e.kecamatan===m).map(e=>e.kelurahan))],I=e=>{h(e);const T=c.find(F=>F.kelurahan===e&&F.kecamatan===m);T&&u(T.kodepos)};return a.jsxs(U,{open:i,onOpenChange:n,children:[a.jsx(z,{children:a.jsx($,{value:r,onChange:e=>d?.(e.target.value)})}),a.jsxs(G,{children:[a.jsxs(Q,{children:[a.jsx(X,{children:"Tempat Tinggal"}),a.jsx(Y,{children:"Alamat lengkap tempat tinggal"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 py-4",children:[a.jsx(t,{label:"Provinsi",children:a.jsxs(x,{value:p,onValueChange:e=>{b(e),f(""),S(""),h(""),u("")},children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih provinsi"})}),a.jsx(v,{children:V.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Kabupaten / Kota",children:a.jsxs(x,{value:s,onValueChange:e=>{f(e),S(""),h(""),u("")},children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih kabupaten / kota"})}),a.jsx(v,{children:L.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Kecamatan",children:a.jsxs(x,{value:m,onValueChange:e=>{S(e),h(""),u("")},children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih kecamatan"})}),a.jsx(v,{children:M.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Kelurahan",children:a.jsxs(x,{value:C,onValueChange:I,children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih kelurahan"})}),a.jsx(v,{children:E.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Jalan / Perumahan & No. Rumah",children:a.jsx(o,{placeholder:"Contoh: Jl. Durian No. 88",value:K,onChange:e=>R(e.target.value)})}),a.jsx(t,{label:"RT",children:a.jsx(o,{placeholder:"Misal: 01",value:P,onChange:e=>y(e.target.value)})}),a.jsx(t,{label:"RW",children:a.jsx(o,{placeholder:"Misal: 04",value:w,onChange:e=>B(e.target.value)})}),a.jsx(t,{label:"Kode Pos",children:a.jsx(o,{placeholder:"Kode Pos",value:D,readOnly:!0})})]}),a.jsxs(Z,{className:"flex flex-1 justify-between",children:[a.jsx(_,{asChild:!0,children:a.jsx(H,{variant:"secondary",children:"Batal"})}),a.jsx(A,{onClick:()=>{const e=W(p,s,m,C,K,P,w,D);d?.(e),n(!1)}})]})]})]})},Ha=()=>{const{student:r,permissions:d}=J().props,{data:i,setData:n,put:p}=O({phone:r.phone??"",email:r.email??"",address:r.address??""}),b=()=>{p(route("ppdb.update",r.id),{preserveScroll:!0,onSuccess:()=>N.success("Alamat berhasil disimpan!"),onError:s=>N.error(q(s))})};return a.jsx(la,{title:"Kontak siswa",description:"Nomor telepon, email dan Alamat tempat tinggal siswa",children:a.jsxs(aa,{children:[a.jsx(ea,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx(t,{label:"Nomor telepon",children:a.jsx(o,{placeholder:"Masukkan nomor telepon",value:i.phone,onChange:s=>n("phone",s.target.value)})}),a.jsx(t,{label:"Alamat email",children:a.jsx(o,{type:"email",placeholder:"Masukkan alamat email",value:i.email,onChange:s=>n("email",s.target.value)})}),a.jsx(t,{label:"Alamat tempat tinggal",className:"col-span-full",required:!0,children:a.jsx(ra,{value:i.address,onValueChange:s=>n("address",s)})})]})}),d?.canUpdate&&a.jsxs(a.Fragment,{children:[a.jsx(ta,{}),a.jsx(sa,{children:a.jsx(A,{label:"Simpan data kontak",onClick:b})})]})]})})};export{Ha as default};
