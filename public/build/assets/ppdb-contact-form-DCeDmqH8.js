import{r as l,j as a,u as J,b as O}from"./app-CV5NnCgl.js";import{a as c}from"./enums-C02uj7LO.js";import{l as W,t as N,e as q}from"./utils-BskjP-Rv.js";import{F as t}from"./form-control-D0ZA7v2a.js";import{S as A}from"./submit-button-lMY-o3f8.js";import{B as H}from"./button-xSSX5Bpb.js";import{D as U,a as z,b as G,c as Q,d as X,e as Y,f as Z,g as _}from"./dialog-BTM9G2TY.js";import{I as o}from"./input-BHbyAHgB.js";import{S as x,a as j,b as g,c as v,d as k}from"./select-P4qb214F.js";import{T as $}from"./textarea-QtBm-jY4.js";import{C as aa,c as ea,d as sa}from"./card-xRIpKJw2.js";import{S as ta}from"./separator-BItM5_TO.js";import la from"./ppdb-form-wrapper-Cvg0S6hl.js";/* empty css            */import"./label-BcFB7se-.js";import"./index-BNprvznM.js";import"./index-Ua1wJIp2.js";import"./loader-circle-C4uEEIYE.js";import"./createLucideIcon-BaUU6ogK.js";import"./check-BR5GXtfa.js";import"./index-B8FGTLBf.js";import"./index-D_aqeO_y.js";import"./index-UBPgyjBK.js";import"./index-C3aZLXI9.js";import"./index-DO3HDzV0.js";import"./index-BG9JKVcx.js";import"./index-Dbfj8cYA.js";import"./index-DA56pQCT.js";import"./x-Bm6Qinfn.js";import"./index-BdQq_4o_.js";import"./index-Co1eZ8UH.js";import"./index-D6tNMEOP.js";import"./index-DIbTWZse.js";import"./index-DZfC-yUP.js";import"./index-BQJtN7WL.js";import"./index-HM2hPpWb.js";import"./chevron-down-I-W78VB_.js";import"./heading-small-CEDvTxGn.js";const ra=({value:r,onValueChange:d})=>{const[i,n]=l.useState(!1),[p,b]=l.useState("Kalimantan Timur"),[s,f]=l.useState("Balikpapan"),[m,S]=l.useState(""),[C,h]=l.useState(""),[D,u]=l.useState(""),[K,R]=l.useState(""),[P,y]=l.useState(""),[w,B]=l.useState(""),V=[...new Set(c.map(e=>e.provinsi))],L=[...new Set(c.filter(e=>e.provinsi===p).map(e=>e.kabupaten))],M=[...new Set(c.filter(e=>e.kabupaten===s).map(e=>e.kecamatan))],E=[...new Set(c.filter(e=>e.kecamatan===m).map(e=>e.kelurahan))],I=e=>{h(e);const T=c.find(F=>F.kelurahan===e&&F.kecamatan===m);T&&u(T.kodepos)};return a.jsxs(U,{open:i,onOpenChange:n,children:[a.jsx(z,{children:a.jsx($,{value:r,onChange:e=>d?.(e.target.value)})}),a.jsxs(G,{children:[a.jsxs(Q,{children:[a.jsx(X,{children:"Tempat Tinggal"}),a.jsx(Y,{children:"Alamat lengkap tempat tinggal"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6 py-4",children:[a.jsx(t,{label:"Provinsi",children:a.jsxs(x,{value:p,onValueChange:e=>{b(e),f(""),S(""),h(""),u("")},children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih provinsi"})}),a.jsx(v,{children:V.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Kabupaten / Kota",children:a.jsxs(x,{value:s,onValueChange:e=>{f(e),S(""),h(""),u("")},children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih kabupaten / kota"})}),a.jsx(v,{children:L.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Kecamatan",children:a.jsxs(x,{value:m,onValueChange:e=>{S(e),h(""),u("")},children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih kecamatan"})}),a.jsx(v,{children:M.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Kelurahan",children:a.jsxs(x,{value:C,onValueChange:I,children:[a.jsx(j,{children:a.jsx(g,{placeholder:"Pilih kelurahan"})}),a.jsx(v,{children:E.map(e=>a.jsx(k,{value:e,children:e},e))})]})}),a.jsx(t,{label:"Jalan / Perumahan & No. Rumah",children:a.jsx(o,{placeholder:"Contoh: Jl. Durian No. 88",value:K,onChange:e=>R(e.target.value)})}),a.jsx(t,{label:"RT",children:a.jsx(o,{placeholder:"Misal: 01",value:P,onChange:e=>y(e.target.value)})}),a.jsx(t,{label:"RW",children:a.jsx(o,{placeholder:"Misal: 04",value:w,onChange:e=>B(e.target.value)})}),a.jsx(t,{label:"Kode Pos",children:a.jsx(o,{placeholder:"Kode Pos",value:D,readOnly:!0})})]}),a.jsxs(Z,{className:"flex flex-1 justify-between",children:[a.jsx(_,{asChild:!0,children:a.jsx(H,{variant:"secondary",children:"Batal"})}),a.jsx(A,{onClick:()=>{const e=W(p,s,m,C,K,P,w,D);d?.(e),n(!1)}})]})]})]})},Ha=()=>{const{student:r,permissions:d}=J().props,{data:i,setData:n,put:p}=O({phone:r.phone??"",email:r.email??"",address:r.address??""}),b=()=>{p(route("ppdb.update",r.id),{preserveScroll:!0,onSuccess:()=>N.success("Alamat berhasil disimpan!"),onError:s=>N.error(q(s))})};return a.jsx(la,{title:"Kontak siswa",description:"Nomor telepon, email dan Alamat tempat tinggal siswa",children:a.jsxs(aa,{children:[a.jsx(ea,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsx(t,{label:"Nomor telepon",children:a.jsx(o,{placeholder:"Masukkan nomor telepon",value:i.phone,onChange:s=>n("phone",s.target.value)})}),a.jsx(t,{label:"Alamat email",children:a.jsx(o,{type:"email",placeholder:"Masukkan alamat email",value:i.email,onChange:s=>n("email",s.target.value)})}),a.jsx(t,{label:"Alamat tempat tinggal",className:"col-span-full",required:!0,children:a.jsx(ra,{value:i.address,onValueChange:s=>n("address",s)})})]})}),d?.canUpdate&&a.jsxs(a.Fragment,{children:[a.jsx(ta,{}),a.jsx(sa,{children:a.jsx(A,{label:"Simpan data kontak",onClick:b})})]})]})})};export{Ha as default};
