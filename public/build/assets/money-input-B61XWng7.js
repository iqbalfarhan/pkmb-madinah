import{r as x,j as M}from"./app-BFlrItZo.js";import{I as j}from"./input-BbLtmAho.js";function F(u){const s=new Intl.NumberFormat(u).formatToParts(123456789e-2),r=s.find(t=>t.type==="group")?.value??".",n=s.find(t=>t.type==="decimal")?.value??",";return{group:r,decimal:n}}function D(u,o,s,r){const{group:n,decimal:t}=F(o);let e=u.replace(new RegExp("\\\\s","g"),"").replace(new RegExp("\\"+n,"g"),"").replace(/[A-Za-z]/g,"").replace(/[^0-9\-" + decimal + "]/g,"");s?e=e.replace(/-/g,(i,I)=>I===0?i:""):e=e.replace(/-/g,"");const f=e.indexOf(t);if(f!==-1)if(e=e.slice(0,f+1)+e.slice(f+1).replace(new RegExp("\\"+t,"g"),""),r===0)e=e.split(t)[0];else{const i=e.split(t);i[1]&&i[1].length>r&&(e=i[0]+t+i[1].slice(0,r))}return e}function E(u,o,s){if(!u)return null;const{decimal:r}=F(o);let n=u;if(s>0?n=n.replace(r,"."):n=n.split(r)[0],n==="-"||n===""||n===".")return null;const t=Number(n);return Number.isFinite(t)?t:null}function a(u,o,s,r){return new Intl.NumberFormat(o,{style:"currency",currency:s,minimumFractionDigits:r,maximumFractionDigits:r}).format(u)}const y=x.forwardRef(function({value:o,onValueChange:s,currency:r="IDR",locale:n="id-ID",decimals:t=r==="IDR"?0:2,allowNegative:e=!1,onBlur:f,onFocus:i,...I},b){const[R,c]=x.useState(o!=null?a(o,n,r,t):""),m=x.useRef(o??null);x.useEffect(()=>{o!==m.current&&(c(o!=null?a(o,n,r,t):""),m.current=o??null)},[o,n,r,t]);const d=p=>{const g=p.target.value,h=D(g,n,e,t),l=E(h,n,t);l!=null?c(a(l,n,r,t)):c(h),l!==m.current&&(m.current=l,s(l))},w=p=>{const g=E(D(R,n,e,t),n,t);c(g!=null?a(g,n,r,t):""),f?.(p)},N=p=>{p.currentTarget.select(),i?.(p)};return M.jsx(j,{ref:b,inputMode:t>0?"decimal":"numeric",autoComplete:"off",value:R,onChange:d,onBlur:w,onFocus:N,placeholder:a(0,n,r,t),...I})});export{y as M};
