import{u as v,j as r}from"./app-BPxaoD1B.js";import{H as w}from"./heading-small-8TLk5Zge.js";import{A as T,a as _}from"./avatar-CxqLRTDI.js";import{B as n}from"./button-Cf23Wpzi.js";import{P,a as S,b as k}from"./popover-DiEhOYUt.js";import{T as A,a as z,b as d,c as t,d as F,e as l}from"./table-OJbkn8VF.js";import{a as H,j}from"./utils-DOVs39RK.js";import c from"./assignment-form-sheet-C8epIptY.js";import h from"./score-form-popover-DHFCbZ_f.js";import{P as B}from"./plus-C5yn9nuu.js";/* empty css            */import"./index-DCfHmF9g.js";import"./index-DpAcpf0n.js";import"./index-79V150Ru.js";import"./index-ye8dhI6l.js";import"./index-DBoDL35E.js";import"./index-Be_LjbFP.js";import"./index-CsQfIekp.js";import"./index-wSHPV6mU.js";import"./index-atC5gUvk.js";import"./index-CASJih5g.js";import"./index-BFMlk8tQ.js";import"./form-control-BxhTeRoy.js";import"./label-BGwDAVJL.js";import"./submit-button-D0VV-d5f.js";import"./loader-circle-C2ea1uRf.js";import"./createLucideIcon-DSJ66mhW.js";import"./check-B-onclxt.js";import"./alert-D2UsTP4g.js";import"./checkbox-BrfGu-5j.js";import"./index-Dy3xDW5n.js";import"./input-Bj33ue8f.js";import"./scroll-area-BWkEse_u.js";import"./index-De7Wv0G9.js";import"./index-BdQq_4o_.js";import"./select-f1Vxtjd5.js";import"./index-BXOgE4UN.js";import"./index-hAKo_CTN.js";import"./chevron-down-CHy7VJh-.js";import"./sheet-YVHw5VGG.js";import"./index-ClC08I3I.js";import"./x-vAhp2Bkg.js";import"./textarea-DzEnRCKx.js";import"./use-mobile-B3L0TYSb.js";import"./circle-alert-Vm5rGRjM.js";import"./trash-2-BrU36aZ0.js";const Pr=()=>{const{lesson:x,students:g=[],scores:p=[],assignments:s=[]}=v().props;return r.jsxs("div",{className:"space-y-6",children:[r.jsx(w,{title:"Daftar Nilai",description:"Daftar nilai siswa untuk setiap tugas",actions:r.jsx(r.Fragment,{children:r.jsx(c,{purpose:"create",children:r.jsxs(n,{children:[r.jsx(B,{}),"Tambah tugas baru"]})})})}),r.jsxs(A,{children:[r.jsxs(z,{children:[r.jsxs(d,{children:[r.jsx(t,{rowSpan:2,className:"border-r-2 border-border",children:"Nama siswa"}),r.jsx(t,{colSpan:s.filter(e=>e.type==="jurnal").length,className:"bg-yellow-300/10 text-center",children:"Nilai jurnal"}),r.jsx(t,{colSpan:s.filter(e=>e.type==="prakarya").length,className:"bg-green-300/10 text-center",children:"Nilai prakarya"}),r.jsx(t,{rowSpan:2,className:H("border-l-2 border-border text-center"),children:r.jsxs(P,{children:[r.jsx(S,{children:r.jsx("div",{children:"Total"})}),r.jsx(k,{children:"avg(jurnal) + avg(prakarya) / 2"})]})})]}),r.jsxs(d,{children:[s.filter(e=>e.type==="jurnal").map((e,a)=>r.jsx(t,{className:"bg-yellow-500/10 text-center",children:r.jsx(c,{purpose:"edit",assignment:e,type:"jurnal",children:r.jsxs(n,{size:"icon",variant:"ghost",children:["J",a+1]})})},e.id)),s.filter(e=>e.type==="prakarya").map((e,a)=>r.jsx(t,{className:"bg-green-500/10 text-center",children:r.jsx(c,{purpose:"edit",assignment:e,type:"prakarya",children:r.jsxs(n,{size:"icon",variant:"ghost",children:["P",a+1]})})},e.id))]})]}),r.jsx(F,{children:g.map(e=>{const a=p.filter(i=>i.student_id===e.id),b=a.filter(i=>i.assignment.type==="jurnal"),f=j(b,i=>Number(i.score)),u=a.filter(i=>i.assignment.type==="prakarya"),y=j(u,i=>Number(i.score)),N=(f+y)/2;return r.jsxs(d,{children:[r.jsx(l,{className:"border-r-2 border-border",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(T,{className:"size-6",children:r.jsx(_,{src:e.avatar})}),r.jsx("span",{children:e.name})]})}),s.filter(i=>i.type==="jurnal").map(i=>{const m=p.find(o=>o.assignment_id===i.id&&o.student_id===e.id);return r.jsx(l,{className:"w-fit bg-yellow-700/10 text-center",children:r.jsx(h,{score:m,options:{student_id:e.id,lesson_id:x.id,assignment_id:i.id}})},i.id)}),s.filter(i=>i.type==="prakarya").map(i=>{const m=p.find(o=>o.assignment_id===i.id&&o.student_id===e.id);return r.jsx(l,{className:"w-fit bg-green-700/10 text-center",children:r.jsx(h,{score:m,options:{student_id:e.id,lesson_id:x.id,assignment_id:i.id}})},i.id)}),r.jsx(l,{className:"w-fit border-l-2 border-border text-center",children:r.jsx(n,{variant:"ghost",size:"icon",children:N.toFixed(2)})})]},e.id)})})]})]})};export{Pr as default};
