import{r as v,u as S,b,j as r,a as C}from"./app-Z-avSkMQ.js";import{F as l}from"./form-control-fwlc92WU.js";import{S as k}from"./submit-button-DaQgsas7.js";import{B as u}from"./button-Derj7LaN.js";import{I as P}from"./input-gxC2u5ob.js";import{P as _,a as c,b as E}from"./popover-XiCK4gay.js";import{T}from"./textarea-b3B3o33c.js";import{t as o,e as m}from"./utils-Zmc12MCs.js";import{T as y}from"./trash-2-jU7VrPUs.js";/* empty css            */import"./label-B63hLAxE.js";import"./index-64abAtv8.js";import"./index-DdgxDHdX.js";import"./loader-circle-CIxwSgQM.js";import"./createLucideIcon-Ux_qAN-3.js";import"./check-Sw-WO-UU.js";import"./index-BxGo_XUm.js";import"./index-4e3jm291.js";import"./index-FHyxUPnF.js";import"./index-CzqLyLnT.js";import"./index-D3daeOOs.js";import"./index-C-5Q-721.js";import"./index-DmRacKM7.js";import"./index-CdMa07b9.js";import"./index-BfWqZG73.js";const rr=({children:p,score:s,options:a})=>{const[d,t]=v.useState(!1),{permissions:h}=S().props,{data:i,setData:n,post:f,put:x}=b({student_id:a?.student_id,lesson_id:a?.lesson_id,assignment_id:a?.assignment_id,score:s?.score??"-",remark:s?.remark??""}),j=()=>{s?x(route("score.update",s.id),{preserveScroll:!0,onSuccess:()=>{o.success("Score updated"),t(!1)},onError:e=>o.error(m(e))}):f(route("score.store"),{preserveScroll:!0,onSuccess:()=>{o.success("Score created"),t(!1)},onError:e=>o.error(m(e))})},g=()=>{C.delete(route("score.destroy",s?.id),{preserveScroll:!0,onSuccess:()=>{o.success("berhasil dihapus"),n("score","-"),t(!1)},onError:e=>o.error(m(e))})};return r.jsxs(_,{open:d,onOpenChange:t,children:[p?r.jsx(c,{asChild:!0,children:p}):r.jsx(c,{asChild:!0,children:r.jsx(u,{variant:"ghost",size:"icon",children:i.score})}),h?.canUpdate&&r.jsx(E,{children:r.jsxs("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),j()},children:[r.jsx(l,{label:"Nilai siswa",children:r.jsx(P,{value:i.score,onChange:e=>n("score",e.target.value)})}),r.jsx(l,{label:"Komentar guru",children:r.jsx(T,{placeholder:"tulis komentar guru disini",value:i.remark,onChange:e=>n("remark",e.target.value)})}),r.jsxs("div",{className:"flex w-full justify-between",children:[r.jsx(k,{}),s&&r.jsx(u,{type:"button",size:"icon",variant:"ghost",onClick:g,children:r.jsx(y,{})})]})]})})]})};export{rr as default};
